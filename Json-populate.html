<!--DOCTYPE HTML -->

<html>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script type="text/javascript" src="jquery-ui-map-3.0-rc/ui/jquery.ui.map.js"></script>
<script>

var markerst = [

  {
    "latitude": '15.543405',
    "longitude": '73.7862221',
    "title": "Devashri",
    "content": "House"
  },
  {
    "latitude": '18.5203',
    "longitude": '73.8567',
    "title": "pune",
    "content": "Home"
  }, 
  {
    "latitude": '15.5439123',
    "longitude": '73.5403299',
    "title": "Srijan Office",
    "content": "Drupal Solutions"
  }
  ];

   window.onload = function () {
        LoadMap();
    }
    function LoadMap() {
      var searchButton = document.getElementById('searchbutton');
      var searchText = document.getElementById('searchbar');
        var mapOptions = {
            center: new google.maps.LatLng(markerst[0].latitude, markerst[0].longitude),
            zoom: 8,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var infoWindow = new google.maps.InfoWindow();
        var latlngbounds = new google.maps.LatLngBounds();
        var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
 
         //For populating the icon
        for (var i = 0; i < markerst.length; i++) {
            var data = markerst[i];
            var myLatlng = new google.maps.LatLng(data.latitude, data.longitude);
            var marker = new google.maps.Marker({
                position: myLatlng,
                map: map,
                title: data.title
            });
            (function (markerq, data) {
                google.maps.event.addListener(markerq, "click", function (e) {
                    infoWindow.setContent("<div style = 'width:200px;min-height:40px'>" + data.content + "</div>");
                    infoWindow.open(map, markerq);
                });
            })(marker, data);
            latlngbounds.extend(marker.position);
        }
        var bounds = new google.maps.LatLngBounds();
        map.setCenter(latlngbounds.getCenter());
        map.fitBounds(latlngbounds);



  //for finding the Maker
$('.searchButton').click(function () { 
for(var j =0; j< markerst.length;j++ ) {
  if(searchText.value === markerst[j].title) {
   map.setCenter(new google.maps.LatLng(markerst[j].latitude, markerst[j].longitude));
   map.setZoom(15);
  }
  else {
    map.setCenter(latlngbounds.getCenter());
    map.setZoom(8);
  }
}
});
}

</script>
<body>
<div id="map_canvas" style="width: 300px; height: 400px"></div>
<input type="text" id = "searchbar"/>
<input type="button" class = "searchbutton" value="SEARCHs"/>
  </body>
</html>